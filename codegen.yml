overwrite: true

# Schema source - Supabase pg_graphql endpoint
schema:
  - ${SUPABASE_GRAPHQL_URL}:
      headers:
        apikey: ${SUPABASE_ANON_KEY}

# GraphQL query/mutation documents
documents: "./src/graphql/**/*.graphql"

generates:
  src/generated/graphql.ts:
    plugins:
      - "typescript"
      - "typescript-operations"
      - "typescript-react-apollo"
    config:
      # Enable React hooks generation
      withHooks: true
      withHOC: false
      withComponent: false

      # Type safety
      skipTypename: false
      avoidOptionals: false
      maybeValue: T | null
      inputMaybeValue: T | null

      # Enums and fragments
      enumsAsTypes: true
      dedupeFragments: true
      nonOptionalTypename: true

      # Documentation
      addDocBlocks: true

      # Apollo Client version and imports - FIXED
      reactApolloVersion: 3
      # Use direct imports instead of namespace imports
      apolloReactCommonImportFrom: "@apollo/client"
      apolloReactHooksImportFrom: "@apollo/client"
      # Add this to prevent TypeScript from resolving to /core/index
      importOperationTypesFrom: "Operations"

      # Scalars
      scalars:
        UUID: string
        Date: string
        Time: string
        Datetime: string
        JSON: any
        BigInt: number
        BigFloat: number
        Opaque: any

# DO NOT run prettier - it breaks the imports!
# Run the fix script manually instead
