### âœ… 4. Triggers in public schema ONLY
| table_name                | trigger_name                                 | event  | timing | trigger_function                                     |
| ------------------------- | -------------------------------------------- | ------ | ------ | ---------------------------------------------------- |
| ai_meal_plans             | trigger_deactivate_old_meal_plans            | INSERT | BEFORE | EXECUTE FUNCTION deactivate_old_meal_plans()         |
| ai_meal_plans             | trigger_deactivate_old_meal_plans            | UPDATE | BEFORE | EXECUTE FUNCTION deactivate_old_meal_plans()         |
| ai_meal_plans             | update_ai_meal_plans_timestamp               | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| ai_workout_plans          | trigger_deactivate_old_workout_plans         | UPDATE | BEFORE | EXECUTE FUNCTION deactivate_old_workout_plans()      |
| ai_workout_plans          | trigger_deactivate_old_workout_plans         | INSERT | BEFORE | EXECUTE FUNCTION deactivate_old_workout_plans()      |
| ai_workout_plans          | update_ai_workout_plans_timestamp            | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| challenge_participants    | after_challenge_award_points                 | UPDATE | AFTER  | EXECUTE FUNCTION award_challenge_points()            |
| challenge_participants    | after_challenge_completed                    | UPDATE | AFTER  | EXECUTE FUNCTION notify_challenge_completed()        |
| challenges                | update_challenges_timestamp                  | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| comparison_snapshots      | update_comparison_snapshots_timestamp        | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| custom_habits             | update_custom_habits_timestamp               | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| daily_nutrition_logs      | after_nutrition_log_insert                   | INSERT | AFTER  | EXECUTE FUNCTION trigger_update_nutrition_streak()   |
| daily_water_intake        | update_daily_water_intake_timestamp          | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| data_exports              | trigger_check_export_expiration              | UPDATE | BEFORE | EXECUTE FUNCTION check_export_expiration()           |
| data_exports              | update_data_exports_timestamp                | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| exercise_library          | update_exercise_library_timestamp            | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| exercise_personal_records | update_exercise_prs_timestamp                | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| exercise_sets             | trigger_check_personal_records               | INSERT | BEFORE | EXECUTE FUNCTION check_and_update_personal_records() |
| exercise_sets             | trigger_update_workout_session_totals_delete | DELETE | AFTER  | EXECUTE FUNCTION update_workout_session_totals()     |
| exercise_sets             | trigger_update_workout_session_totals_insert | INSERT | AFTER  | EXECUTE FUNCTION update_workout_session_totals()     |
| exercise_sets             | trigger_update_workout_session_totals_update | UPDATE | AFTER  | EXECUTE FUNCTION update_workout_session_totals()     |
| food_database             | update_food_database_timestamp               | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| meal_items                | trigger_update_nutrition_log_totals_delete   | DELETE | AFTER  | EXECUTE FUNCTION update_nutrition_log_totals()       |
| meal_items                | trigger_update_nutrition_log_totals_insert   | INSERT | AFTER  | EXECUTE FUNCTION update_nutrition_log_totals()       |
| meal_items                | trigger_update_nutrition_log_totals_update   | UPDATE | AFTER  | EXECUTE FUNCTION update_nutrition_log_totals()       |
| meal_plan_adherence       | update_meal_plan_adherence_timestamp         | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| meal_reminders            | update_meal_reminders_timestamp              | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| meal_templates            | update_meal_templates_timestamp              | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| plan_regeneration_usage   | update_plan_regeneration_usage_timestamp     | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| profiles                  | on_profile_created_subscription              | INSERT | AFTER  | EXECUTE FUNCTION handle_new_user_subscription()      |
| profiles                  | update_profiles_timestamp                    | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| progress_milestones       | trigger_milestone_timeline_event             | INSERT | AFTER  | EXECUTE FUNCTION create_milestone_timeline_event()   |
| progress_milestones       | trigger_milestone_timeline_event             | UPDATE | AFTER  | EXECUTE FUNCTION create_milestone_timeline_event()   |
| progress_milestones       | update_progress_milestones_timestamp         | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| recipe_database           | update_recipe_database_timestamp             | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| rewards_catalog           | update_rewards_catalog_timestamp             | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| subscriptions             | update_subscriptions_timestamp               | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| user_badges               | after_badge_earned                           | INSERT | AFTER  | EXECUTE FUNCTION notify_badge_earned()               |
| user_profile_extended     | trigger_update_profile_completeness          | UPDATE | BEFORE | EXECUTE FUNCTION update_profile_completeness()       |
| user_profile_extended     | trigger_update_profile_completeness          | INSERT | BEFORE | EXECUTE FUNCTION update_profile_completeness()       |
| user_redeemed_rewards     | after_discount_reward_redeemed               | INSERT | AFTER  | EXECUTE FUNCTION auto_generate_coupon()              |
| user_rewards              | update_user_rewards_timestamp                | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| user_streaks              | after_streak_milestone                       | UPDATE | AFTER  | EXECUTE FUNCTION notify_streak_milestone()           |
| water_intake_logs         | water_log_delete_update_daily                | DELETE | AFTER  | EXECUTE FUNCTION update_daily_water_total()          |
| water_intake_logs         | water_log_insert_update_daily                | INSERT | AFTER  | EXECUTE FUNCTION update_daily_water_total()          |
| weight_history            | after_weight_log_insert                      | INSERT | AFTER  | EXECUTE FUNCTION trigger_update_weight_streak()      |
| weight_history            | after_weight_log_milestone                   | INSERT | AFTER  | EXECUTE FUNCTION notify_weight_milestone()           |
| workout_logs              | after_workout_log_insert                     | INSERT | AFTER  | EXECUTE FUNCTION trigger_update_workout_streak()     |
| workout_plan_adherence    | update_workout_plan_adherence_timestamp      | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| workout_sessions          | update_workout_sessions_timestamp            | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
| workout_templates         | update_workout_templates_timestamp           | UPDATE | BEFORE | EXECUTE FUNCTION update_timestamp()                  |
