# ==================================================================
# AI WORKOUT PLANS - GraphQL Queries & Mutations
# ==================================================================

# Query: Get user's active workout plan
query GetActiveWorkoutPlan($userId: UUID!) {
  ai_workout_plansCollection(
    filter: {
      user_id: { eq: $userId }
      is_active: { eq: true }
    }
    first: 1
  ) {
    edges {
      node {
        id
        user_id
        quiz_result_id
        plan_data
        workout_type
        duration_per_session
        frequency_per_week
        status
        is_active
        error_message
        generated_at
        created_at
        updated_at
      }
    }
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
  }
}

# Query: Get all workout plans for user
query GetUserWorkoutPlans($userId: UUID!, $first: Int = 10) {
  ai_workout_plansCollection(
    filter: { user_id: { eq: $userId } }
    first: $first
  ) {
    edges {
      node {
        id
        user_id
        quiz_result_id
        plan_data
        workout_type
        duration_per_session
        frequency_per_week
        status
        is_active
        error_message
        generated_at
        created_at
        updated_at
      }
    }
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
  }
}

# Mutation: Create new workout plan
mutation CreateWorkoutPlan($input: ai_workout_plansInsertInput!) {
  insertIntoai_workout_plansCollection(objects: [$input]) {
    records {
      id
      user_id
      quiz_result_id
      plan_data
      workout_type
      duration_per_session
      frequency_per_week
      status
      is_active
      generated_at
      created_at
    }
    affectedCount
  }
}
